(function(e){function t(t){for(var r,c,u=t[0],i=t[1],s=t[2],l=0,d=[];l<u.length;l++)c=u[l],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);b&&b(t);while(d.length)d.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},c={app:0},a={app:0},o=[];function u(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-0614c12d":"0a866004","chunk-0917e166":"94063ae0","chunk-270f419f":"1f0e9644","chunk-2d0e5e97":"c807da23","chunk-2d207472":"07e3e0d7","chunk-2d2095aa":"c681d69b","chunk-2d237533":"4d7438bf","chunk-400ede5e":"164aa12e","chunk-45237f2c":"0ec9afd4","chunk-56bbd00e":"146b50bc","chunk-674ac3fb":"0cc34b5e","chunk-b3f255ae":"facedb5b","chunk-c4eceeac":"111e4d11"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-0614c12d":1,"chunk-0917e166":1,"chunk-270f419f":1,"chunk-400ede5e":1,"chunk-45237f2c":1,"chunk-56bbd00e":1,"chunk-674ac3fb":1,"chunk-b3f255ae":1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0614c12d":"1795f992","chunk-0917e166":"28d80b24","chunk-270f419f":"62329718","chunk-2d0e5e97":"31d6cfe0","chunk-2d207472":"31d6cfe0","chunk-2d2095aa":"31d6cfe0","chunk-2d237533":"31d6cfe0","chunk-400ede5e":"6dedb618","chunk-45237f2c":"f9090552","chunk-56bbd00e":"48666ccd","chunk-674ac3fb":"f7a53da2","chunk-b3f255ae":"58c8f683","chunk-c4eceeac":"31d6cfe0"}[e]+".css",a=i.p+r,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var s=o[u],l=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){s=d[u],l=s.getAttribute("data-href");if(l===r||l===a)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var r=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete c[e],b.parentNode.removeChild(b),n(o)},b.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(b)})).then((function(){c[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=u(e);var d=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(b);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",d.name="ChunkLoadError",d.type=r,d.request=c,n[1](d)}a[e]=void 0}};var b=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/song/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var b=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"044c":function(e,t,n){"use strict";n("4b93")},3950:function(e,t,n){"use strict";n.d(t,"b",(function(){return l}));n("d3b7"),n("159b");var r=n("bc3a"),c=n.n(r),a=n("b250"),o=function(){return c()({method:"post",url:"https://api.sally-handmade.com/music/v1/refresh",data:{refresh_token:a["a"].get("userRefreshToken")}})},u=c.a.create({baseURL:"https://api.sally-handmade.com/music/",timeout:1e4});u.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(a["a"].get("userToken")),e}));var i=!1,s=[];u.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;return 401===e.response.status?i?new Promise((function(e){s.push((function(n){t.headers.Authorization="Bearer ".concat(n),u(t).then((function(t){return e(t)}))}))})):(i=!0,o().then((function(e){a["a"].set("userToken",e.data.access_token),a["a"].set("userRefreshToken",e.data.refresh_token),t.headers.Authorization="Bearer ".concat(e.data.access_token),s.forEach((function(t){return t(e.data.access_token)})),s=[]})).catch((function(){a["a"].remove("userToken"),a["a"].remove("userRefreshToken"),window.location.reload()})).finally((function(){i=!1})),new Promise((function(e){u(t).then((function(t){return e(t)}))}))):(window.navigator.onLine||alert("網路出了點問題，請重新連線後重整網頁"),Promise.reject(e))})),t["a"]=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;switch(e=e.toLowerCase(),e){case"post":return u.post(t,n,r);case"get":return u.get(t,{params:n});case"delete":return u.delete(t,{params:n});case"put":return u.put(t,n);case"patch":return u.patch(t,n);default:return console.log("未知的 method: ".concat(e)),!1}};var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u.get(e,{params:t})}},"4b93":function(e,t,n){},"52e3":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c=n("bfbe");function a(e,t,n,c,a,o){var u=Object(r["J"])("router-view"),i=Object(r["J"])("Loading"),s=Object(r["J"])("AppNotifications");return Object(r["A"])(),Object(r["h"])(r["a"],null,[Object(r["l"])(u),Object(r["l"])(i,{modelValue:e.show,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.show=t}),message:e.msg},null,8,["modelValue","message"]),Object(r["l"])(s)],64)}var o=n("5530"),u=function(e){return Object(r["D"])("data-v-3547af4e"),e=e(),Object(r["B"])(),e},i={class:"notification-inner border-l-4 flex p-3"},s={key:0,class:"notification-icon far fa-check-circle"},l={key:1,class:"notification-icon fa fa-info-circle"},d={key:2,class:"notification-icon far fa-times-circle"},b={key:3,class:"notification-icon fa fa-info-circle"},f={class:"ml-2"},p={class:"mt-1 text-gray-600 font-bold tracking-wider"},g={key:0,class:"text-gray-400 text-sm mt-0.5"},h=["onClick"],m=u((function(){return Object(r["i"])("i",{class:"fa fa-times text-xl"},null,-1)})),O=[m];function j(e,t,n,c,a,o){var u=Object(r["J"])("notifications");return Object(r["A"])(),Object(r["f"])(u,null,{body:Object(r["W"])((function(e){var n=e.item,a=e.close;return[Object(r["i"])("div",{class:Object(r["t"])(["notification mx-4 mb-4 bg-white rounded-lg shadow-lg relative overflow-hidden","notification-".concat(n.type||"default")])},[Object(r["i"])("div",i,["success"===n.type?(Object(r["A"])(),Object(r["h"])("i",s)):"warn"===n.type?(Object(r["A"])(),Object(r["h"])("i",l)):"error"===n.type?(Object(r["A"])(),Object(r["h"])("i",d)):(Object(r["A"])(),Object(r["h"])("i",b)),Object(r["i"])("div",f,[Object(r["i"])("div",p,Object(r["M"])(n.title),1),n.text?(Object(r["A"])(),Object(r["h"])("div",g,Object(r["M"])(n.text),1)):Object(r["g"])("",!0),Object(r["i"])("button",{type:"button",class:Object(r["t"])(["absolute top-4 right-3 w-6 h-6 transition duration-500 flex justify-center items-center text-gray-400 hover:text-black",[n.text?"top-2":"top-4",c.times?"times":""]]),onClick:a,onMouseover:t[0]||(t[0]=function(){return c.enter&&c.enter.apply(c,arguments)}),onMouseleave:t[1]||(t[1]=function(){return c.out&&c.out.apply(c,arguments)})},O,42,h)])])],2)]})),_:1})}var v={setup:function(){var e=Object(r["G"])(!1),t=function(){e.value=!0},n=function(){e.value=!1};return{enter:t,out:n,times:e}}},y=(n("a998"),n("6b0d")),k=n.n(y);const w=k()(v,[["render",j],["__scopeId","data-v-3547af4e"]]);var x=w,S=function(e){return Object(r["D"])("data-v-10c31c26"),e=e(),Object(r["B"])(),e},A={class:"absolute top-0 right-0 bottom-0 left-0 bg-gray-800 opacity-80 flex flex-col justify-center items-center z-10"},L={class:"text-white text-2xl font-bold mb-10"},C=S((function(){return Object(r["i"])("div",{class:"la-line-scale-pulse-out la-2x"},[Object(r["i"])("div"),Object(r["i"])("div"),Object(r["i"])("div"),Object(r["i"])("div"),Object(r["i"])("div")],-1)}));function _(e,t,n,c,a,o){return Object(r["X"])((Object(r["A"])(),Object(r["h"])("div",A,[Object(r["i"])("p",L,Object(r["M"])(n.message),1),C],512)),[[r["S"],n.modelValue]])}var T={name:"Loading",props:{modelValue:Boolean,message:String}};n("044c");const M=k()(T,[["render",_],["__scopeId","data-v-10c31c26"]]);var P=M,E=n("babd"),R={name:"App",components:{AppNotifications:x,Loading:P},setup:function(){return Object(o["a"])({},Object(E["c"])())}};n("94eb");const B=k()(R,[["render",a]]);var I=B,V=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),J=(n("b0c0"),{class:"h-full p-7 overflow-auto",ref:"main"}),q={class:"p-3 text-blue-900 flex gap-2"},G=["disabled"],W=["disabled"],H=["disabled"],N={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-5 transition duration-500"},Q={class:"aspect-w-1 aspect-h-1 rounded overflow-hidden mb-4 relative"},F=["src"],U=["title"],X={class:"text-gray-300"};function D(e,t,c,a,o,u){var i=Object(r["J"])("router-link");return Object(r["A"])(),Object(r["h"])("div",J,[Object(r["i"])("div",q,[Object(r["i"])("button",{class:Object(r["t"])(["rounded-full px-3 py-1 transition duration-300","genaral"===a.currentTag?"bg-gray-200":"bg-gray-600 text-white hover:bg-gray-500"]),onClick:t[0]||(t[0]=function(e){return a.getSong("genaral"),a.currentTag="genaral"}),disabled:"genaral"===a.currentTag},"一般",10,G),Object(r["i"])("button",{class:Object(r["t"])(["rounded-full px-3 py-1 transition duration-300","hot"===a.currentTag?"bg-gray-200":"bg-gray-600 text-white hover:bg-gray-500"]),onClick:t[1]||(t[1]=function(e){return a.getSong("hot"),a.currentTag="hot"}),disabled:"hot"===a.currentTag},"收藏數",10,W),Object(r["i"])("button",{class:Object(r["t"])(["rounded-full px-3 py-1 transition duration-300","watch"===a.currentTag?"bg-gray-200":"bg-gray-600 text-white hover:bg-gray-500"]),onClick:t[2]||(t[2]=function(e){return a.getSong("watch"),a.currentTag="watch"}),disabled:"watch"===a.currentTag},"播放次數",10,H)]),Object(r["i"])("ul",N,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(a.songs,(function(e){return Object(r["A"])(),Object(r["h"])("li",{key:e.id,class:"transition duration-500"},[Object(r["l"])(i,{to:{name:"song",params:{songId:e.id}},class:"block p-4 bg-gray-600 hover:bg-gray-500 rounded duration-500"},{default:Object(r["W"])((function(){return[Object(r["i"])("div",Q,[Object(r["i"])("div",{class:"absolute inset-0 bg-center filter blur-xl",style:Object(r["u"])({backgroundImage:e.image?"url("+e.image+")":"url("+a.defaultImg+")"})},null,4),Object(r["i"])("img",{src:e.image||n("58f6"),alt:"song photo"},null,8,F)]),Object(r["i"])("h2",{class:"text-white mb-2",title:e.name},Object(r["M"])(e.name),9,U),Object(r["i"])("p",X,Object(r["M"])(e.composer),1)]})),_:2},1032,["to"])])})),128))])],512)}var z=n("2909"),K=n("1da1"),Y=(n("96cf"),n("99af"),n("3950")),Z={name:"Home",setup:function(){var e,t=Object(r["G"])("genaral"),c=n("58f6"),a=Object(r["G"])(null),o=Object(r["E"])({songs:[]}),u=1,i=function(){var t=Object(K["a"])(regeneratorRuntime.mark((function t(n){var r,c,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:1,1===r&&(o.songs=[],u=1,Object(E["b"])()),c={sort:"desc",page:r},"hot"===n&&(c.order="music_likes_count"),"watch"===n&&(c.order="watched"),t.prev=5,t.next=8,Object(Y["a"])("get","v1/music",c);case 8:a=t.sent,u=a.data.meta.current_page,e=a.data.meta.last_page,o.songs=[].concat(Object(z["a"])(o.songs),Object(z["a"])(a.data.data)),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](5),console.log(t.t0);case 17:Object(E["a"])();case 18:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e){return t.apply(this,arguments)}}();i();var s=function(n){var r=n.srcElement,c=r.clientHeight,a=r.scrollTop,o=r.scrollHeight;a+c>=o-300&&u<e&&(u+=1,i(t.value,u))};Object(r["y"])(Object(K["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.value.addEventListener("scroll",s);case 1:case"end":return e.stop()}}),e)}))));var l=Object(r["O"])(o),d=l.songs;return{songs:d,currentTag:t,defaultImg:c,main:a,getSong:i}}};const $=k()(Z,[["render",D]]);var ee=$,te={class:"main flex"},ne={class:"w-full flex flex-col relative"},re={class:"bg-gray-700 flex-grow overflow-auto"};function ce(e,t,n,c,a,o){var u=Object(r["J"])("SideBar"),i=Object(r["J"])("Header"),s=Object(r["J"])("router-view"),l=Object(r["J"])("Player");return Object(r["A"])(),Object(r["h"])("main",te,[Object(r["l"])(u,{isLogin:c.isLogin,username:c.username,onToLogin:c.toLogin},null,8,["isLogin","username","onToLogin"]),Object(r["i"])("section",ne,[Object(r["l"])(i,{isLogin:c.isLogin,disable:c.disable,onLogout:c.logout},null,8,["isLogin","disable","onLogout"]),Object(r["i"])("div",re,[Object(r["l"])(s)])]),Object(r["l"])(l)])}var ae=n("b250"),oe=(n("ac1f"),n("841c"),{class:"px-10 py-2 bg-gray-800 w-full"}),ue={class:"container flex justify-between items-center flex-wrap md:flex-nowrap m-auto"},ie={class:"h-8 order-1 sm:order-none my-1"},se={class:"relative w-48"},le=Object(r["i"])("i",{class:"fas fa-search absolute top-2 left-3"},null,-1),de=["value"],be={key:0,class:"my-1"},fe=Object(r["k"])("註冊"),pe=Object(r["k"])("登入"),ge=["disabled"];function he(e,t,n,c,a,o){var u=Object(r["J"])("router-link");return Object(r["A"])(),Object(r["h"])("header",oe,[Object(r["i"])("div",ue,[Object(r["i"])("div",ie,[Object(r["X"])(Object(r["i"])("div",se,[le,Object(r["i"])("input",{type:"search",class:"pl-9 pr-3 py-1 rounded-full outline-none w-full",placeholder:"歌曲或歌手",ref:"queryStr",value:c.defaultQuery,onKeyup:t[0]||(t[0]=Object(r["Y"])((function(){return c.search&&c.search.apply(c,arguments)}),["enter"]))},null,40,de)],512),[[r["S"],c.showSearch]])]),c.isLogin?(Object(r["A"])(),Object(r["h"])("button",{key:1,type:"button",class:"text-purple-200 font-bold text-sm px-3 py-2 rounded-sm border border-purple-200 hover:bg-purple-200 hover:text-gray-800 transition duration-300",onClick:t[1]||(t[1]=function(){return c.logout&&c.logout.apply(c,arguments)}),disabled:n.disable},"登出",8,ge)):(Object(r["A"])(),Object(r["h"])("div",be,[Object(r["l"])(u,{class:"text-purple-100 font-bold text-sm hover:underline mr-5",to:{name:"register"}},{default:Object(r["W"])((function(){return[fe]})),_:1}),Object(r["l"])(u,{class:"text-purple-200 font-bold text-sm px-3 py-2 rounded-sm border border-purple-200 hover:bg-purple-200 hover:text-gray-800 transition duration-300",to:{name:"login"}},{default:Object(r["W"])((function(){return[pe]})),_:1})]))])])}var me=n("5502"),Oe={name:"Header",emits:["logout"],props:["isLogin","title","disable"],setup:function(e,t){var n=t.emit,c=Object(me["b"])(),a=Object(V["d"])(),o=Object(r["G"])(e.isLogin),u=Object(r["G"])(null),i=Object(r["d"])((function(){return c.state.defaultQuery})),s=Object(r["d"])((function(){return c.state.showSearch})),l=function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n("logout");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){u.value.value&&a.push({name:"query",params:{query:u.value.value}})};return{showSearch:s,isLogin:o,logout:l,defaultQuery:i,search:d,queryStr:u}}};const je=k()(Oe,[["render",he]]);var ve=je,ye={class:"side-bar bg-gray-900 h-full px-2 py-4 text-gray-300 overflow-auto"},ke=Object(r["i"])("div",{class:"logo h-12 text-white text-2xl font-black text-center"},[Object(r["i"])("i",{class:"fas fa-music"}),Object(r["k"])(" Music")],-1),we={key:0,class:"text-black text-lg p-3 bg-yellow-500 rounded-md mb-2"},xe=Object(r["i"])("i",{class:"fas fa-address-card mr-3"},null,-1),Se={class:"text-lg mb-10"},Ae=Object(r["i"])("i",{class:"far fa-heart text-xl mr-3"},null,-1),Le=Object(r["k"])("收藏的歌曲"),Ce=[Ae,Le];function _e(e,t,n,c,a,o){var u=Object(r["J"])("router-link");return Object(r["A"])(),Object(r["h"])("nav",ye,[ke,c.isLogin?(Object(r["A"])(),Object(r["h"])("div",we,[xe,Object(r["k"])(Object(r["M"])(c.username),1)])):Object(r["g"])("",!0),Object(r["i"])("ul",Se,[(Object(r["A"])(!0),Object(r["h"])(r["a"],null,Object(r["H"])(c.menuItem,(function(e){return Object(r["A"])(),Object(r["h"])("li",{class:Object(r["t"])(["px-3 py-1 hover:bg-gray-400 rounded-md",c.isActive(e.path)?"text-purple-500":""]),key:e.name},[Object(r["l"])(u,{class:"block w-full",to:{name:e.name}},{default:Object(r["W"])((function(){return[Object(r["i"])("i",{class:Object(r["t"])(["text-xl mr-3",e.icon])},null,2),Object(r["k"])(Object(r["M"])(e.text),1)]})),_:2},1032,["to"])],2)})),128))]),Object(r["i"])("ul",null,[Object(r["i"])("li",{class:Object(r["t"])(["px-3 py-1 hover:bg-gray-500 rounded-md cursor-pointer",c.isActive(["favorite"])?"text-purple-500":""]),onClick:t[0]||(t[0]=function(){return c.toLogin&&c.toLogin.apply(c,arguments)})},Ce,2)])])}n("7db0"),n("2ca0");var Te={name:"SideBar",props:["isLogin","username"],emits:["toLogin"],setup:function(e,t){var n=t.emit,c=Object(V["c"])(),a=Object(V["d"])(),o=Object(r["N"])(e,"isLogin"),u=Object(r["N"])(e,"username"),i=[{name:"home",text:"首頁",icon:"fas fa-home",path:["home"]},{name:"search",text:"搜尋",icon:"fas fa-search",path:["search","genre","query"]}],s=function(){o.value?a.push({name:"favorite"}):n("toLogin")},l=Object(r["d"])((function(){return c.path})),d=function(e){return e.find((function(e){return l.value.startsWith("/".concat(e))}))};return{menuItem:i,isLogin:o,username:u,toLogin:s,isActive:d}}};n("d9ee");const Me=k()(Te,[["render",_e]]);var Pe=Me,Ee=function(e){return Object(r["D"])("data-v-317af778"),e=e(),Object(r["B"])(),e},Re={class:"player text-gray-300 text-sm px-4 flex items-center w-full bg-gray-800 absolute bottom-0"},Be={class:"w-30"},Ie={key:0,class:"flex items-center"},Ve={class:"w-14 h-14 mr-3 flex justify-center items-center bg-white rounded"},Je=["src"],qe={class:"text-base mb-1"},Ge={class:"w-2/5 text-center px-2 relative"},We={class:"mb-2"},He=Ee((function(){return Object(r["i"])("i",{class:"fas fa-backward"},null,-1)})),Ne=[He],Qe=Ee((function(){return Object(r["i"])("i",{class:"fas fa-forward"},null,-1)})),Fe=[Qe],Ue={class:"flex justify-between items-center"},Xe={class:"w-16"},De={class:"w-full mx-3"},ze={class:"flex items-center h-6 w-full cursor-pointer relative"},Ke={class:"block h-1 w-full bg-gray-400 rounded"},Ye={class:"w-16"},Ze={class:"w-30 flex items-center relative"},$e={class:"ml-5 mr-3"},et={class:"flex items-center h-6 w-1/3 cursor-pointer relative"},tt={class:"block h-1 w-full bg-gray-400 rounded"},nt={class:"fas fa-cog text-xl transition transform hover:rotate-180",ref:"settingBtn"};function rt(e,t,c,a,o,u){var i=Object(r["J"])("Setting");return Object(r["A"])(),Object(r["h"])("div",Re,[Object(r["i"])("div",Be,[a.currentSong.name?(Object(r["A"])(),Object(r["h"])("div",Ie,[Object(r["i"])("div",Ve,[Object(r["i"])("img",{alt:"song photo",src:a.currentSong.image||n("58f6")},null,8,Je)]),Object(r["i"])("div",null,[Object(r["i"])("p",qe,Object(r["M"])(a.currentSong.name),1),Object(r["i"])("p",null,Object(r["M"])(a.currentSong.composer),1)])])):Object(r["g"])("",!0)]),Object(r["i"])("div",Ge,[Object(r["i"])("div",We,[Object(r["i"])("button",{type:"button",class:"text-xl",onClick:t[0]||(t[0]=function(e){return a.fastwind(-a.fastwindSec)})},Ne),Object(r["i"])("button",{type:"button",class:"w-9 h-9 rounded-full border mx-7 bg-gray-300",onClick:t[1]||(t[1]=function(){return a.toggleAudio&&a.toggleAudio.apply(a,arguments)})},[Object(r["i"])("i",{class:Object(r["t"])(["fa text-sm text-gray-900",{"fa-play":!a.play,"fa-pause":a.play}])},null,2)]),Object(r["i"])("button",{type:"buton",class:"text-xl",onClick:t[2]||(t[2]=function(e){return a.fastwind(a.fastwindSec)})},Fe)]),Object(r["i"])("div",Ue,[Object(r["i"])("span",Xe,Object(r["M"])(a.seek),1),Object(r["i"])("div",De,[Object(r["i"])("div",ze,[Object(r["i"])("span",Ke,[Object(r["i"])("span",{class:"block w-3 h-3 rounded-full bg-gray-300 absolute top-2/4 transform -translate-x-1/2 -translate-y-1/2",style:Object(r["u"])({left:a.playerProgress})},null,4),Object(r["i"])("span",{class:"block h-full rounded bg-gradient-to-r from-purple-200 to-purple-300",style:Object(r["u"])({width:a.playerProgress})},null,4),Object(r["i"])("span",{class:"absolute inset-0",onClick:t[3]||(t[3]=function(e){return a.updateSeekClk(e)}),onMousemove:t[4]||(t[4]=function(e){return a.updateSeek(e)}),onMouseout:t[5]||(t[5]=function(e){return a.isClick=!1})},null,32)])])]),Object(r["i"])("span",Ye,Object(r["M"])(a.duration),1)])]),Object(r["i"])("div",Ze,[Object(r["i"])("div",$e,[a.volumeWidth?(Object(r["A"])(),Object(r["h"])("i",{key:0,class:"fas fa-volume-up text-xl cursor-pointer",onClick:t[6]||(t[6]=function(e){return a.mute(!1)})})):(Object(r["A"])(),Object(r["h"])("i",{key:1,class:"fas fa-volume-off mr-3 text-xl cursor-pointer",onClick:t[7]||(t[7]=function(e){return a.mute(!0)})}))]),Object(r["i"])("div",et,[Object(r["i"])("span",tt,[Object(r["i"])("span",{class:"block w-3 h-3 rounded-full bg-gray-300 absolute top-2/4 transform -translate-x-1/2 -translate-y-1/2",style:Object(r["u"])({left:"".concat(100*a.volumeWidth,"%")})},null,4),Object(r["i"])("span",{class:"block h-full rounded bg-gradient-to-r from-purple-200 to-purple-300",style:Object(r["u"])({width:"".concat(100*a.volumeWidth,"%")})},null,4),Object(r["i"])("span",{class:"absolute inset-0",onClick:t[8]||(t[8]=function(e){return a.updateVolumeClk(e)}),onMousemove:t[9]||(t[9]=function(e){return a.updateVolume(e)}),onMouseout:t[10]||(t[10]=function(e){return a.isClick=!1})},null,32)])]),Object(r["i"])("button",{type:"button",class:"ml-3",onClick:t[11]||(t[11]=function(e){return a.showSetting=!a.showSetting})},[Object(r["i"])("i",nt,null,512)]),Object(r["X"])(Object(r["l"])(i,{class:"absolute -top-3 left-1/3 transform -translate-y-full",onShowSetting:t[12]||(t[12]=function(e){return a.showSetting=e})},null,512),[[r["S"],a.showSetting]])])])}var ct=Object(r["i"])("h2",{class:"text-xl font-bold"},"快轉秒數",-1),at={class:"space-y-1"},ot={class:"block w-full cursor-pointer",for:"five"},ut=Object(r["k"])(" 5秒"),it={class:"block w-full cursor-pointer",for:"ten"},st=Object(r["k"])(" 10秒"),lt={class:"block w-full cursor-pointer",for:"fifteen"},dt=Object(r["k"])(" 15秒");function bt(e,t,n,c,a,o){return Object(r["A"])(),Object(r["h"])("section",{class:"bg-black opacity-80 p-2 rounded",onClickCapture:t[6]||(t[6]=function(e){return c.showSetting(!0)})},[ct,Object(r["i"])("div",at,[Object(r["i"])("div",{class:"flex items-center rounded p-1 hover:bg-gray-200 hover:bg-opacity-40",onClick:t[1]||(t[1]=function(e){return c.showSetting(!1)})},[Object(r["i"])("label",ot,[Object(r["X"])(Object(r["i"])("input",{type:"radio",value:"five",id:"five","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.selected=e})},null,512),[[r["Q"],c.selected]]),ut])]),Object(r["i"])("div",{class:"flex items-center rounded p-1 hover:bg-gray-200 hover:bg-opacity-40",onClick:t[3]||(t[3]=function(e){return c.showSetting(!1)})},[Object(r["i"])("label",it,[Object(r["X"])(Object(r["i"])("input",{type:"radio",value:"ten",id:"ten","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.selected=e})},null,512),[[r["Q"],c.selected]]),st])]),Object(r["i"])("div",{class:"flex items-center rounded p-1 hover:bg-gray-200 hover:bg-opacity-40",onClick:t[5]||(t[5]=function(e){return c.showSetting(!1)})},[Object(r["i"])("label",lt,[Object(r["X"])(Object(r["i"])("input",{type:"radio",value:"fifteen",id:"fifteen","onUpdate:modelValue":t[4]||(t[4]=function(e){return c.selected=e})},null,512),[[r["Q"],c.selected]]),dt])])])],32)}var ft={name:"Setting",emits:["showSetting"],setup:function(e,t){var n=t.emit,c=Object(me["b"])(),a=Object(r["G"])(ae["a"].get("fastwindSec")||"five");Object(r["U"])(a,(function(e){c.commit("setFastwindSec",e),ae["a"].set("fastwindSec",e)}));var o=function(e){n("showSetting",e)};return{selected:a,showSetting:o}}};const pt=k()(ft,[["render",bt]]);var gt=pt,ht={name:"Player",components:{Setting:gt},setup:function(){var e=Object(me["b"])(),t=Object(r["G"])(!1),n=Object(r["G"])(!1),c=Object(r["G"])(null);document.addEventListener("click",(function(e){e.target!==c.value&&(t.value=!1)}),!0),document.addEventListener("mousedown",(function(){n.value=!0})),document.addEventListener("mouseup",(function(){n.value=!1}));var a=Object(r["d"])((function(){return e.getters.playing})),o=Object(r["d"])((function(){return e.state.seek})),u=Object(r["d"])((function(){return e.state.duration})),i=Object(r["d"])((function(){return e.state.playerProgress})),s=Object(r["d"])((function(){return e.state.volumeWidth})),l=Object(r["d"])((function(){return e.state.currentSong})),d=function(t){return e.commit("mute",t)},b=function(t){n.value&&e.dispatch("updateSeek",t)},f=function(t){return e.dispatch("updateSeek",t)},p=function(t){n.value&&e.dispatch("updateVolume",t)},g=function(t){return e.dispatch("updateVolume",t)},h=function(){return e.dispatch("toggleAudio")},m=Object(r["E"])({five:5,ten:10,fifteen:15}),O=Object(r["d"])((function(){return m[e.state.fastwindSec]})),j=function(t){return e.dispatch("fastwind",t)};return{settingBtn:c,showSetting:t,isClick:n,play:a,seek:o,duration:u,playerProgress:i,volumeWidth:s,currentSong:l,mute:d,toggleAudio:h,updateSeek:b,updateSeekClk:f,fastwind:j,fastwindSec:O,updateVolume:p,updateVolumeClk:g}}};n("e704");const mt=k()(ht,[["render",rt],["__scopeId","data-v-317af778"]]);var Ot=mt,jt=n("6650"),vt={name:"Index",components:{Header:ve,SideBar:Pe,Player:Ot},setup:function(){var e=Object(r["G"])(ae["a"].get("userToken")),t=Object(r["G"])(""),n=Object(r["G"])(!1);e.value&&Object(Y["a"])("get","v1/user").then((function(e){t.value=e.data.data.name})).catch((function(e){console.log(e)}));var c=function(){Object(jt["c"])("請先登入")},a=function(){var e=Object(K["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value=!0,e.next=3,Object(Y["b"])("v1/logout").then((function(){Object(jt["b"])("登出成功")})).catch((function(e){console.log(e)})).finally((function(){ae["a"].remove("userToken"),ae["a"].remove("userRefreshToken"),window.location.reload(),n.value=!1}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{isLogin:e,username:t,toLogin:c,logout:a,disable:n}}};n("ab63");const yt=k()(vt,[["render",ce],["__scopeId","data-v-605a9e34"]]);var kt=yt,wt=function(){return n.e("chunk-400ede5e").then(n.bind(null,"a55b"))},xt=function(){return n.e("chunk-270f419f").then(n.bind(null,"73cf"))},St=function(){return n.e("chunk-b3f255ae").then(n.bind(null,"8dc3"))},At=function(){return n.e("chunk-2d207472").then(n.bind(null,"a09f"))},Lt=function(){return n.e("chunk-45237f2c").then(n.bind(null,"2d3b"))},Ct=function(){return n.e("chunk-0917e166").then(n.bind(null,"bcb1"))},_t=function(){return n.e("chunk-56bbd00e").then(n.bind(null,"b083"))},Tt=function(){return n.e("chunk-0614c12d").then(n.bind(null,"2960"))},Mt=function(){return n.e("chunk-c4eceeac").then(n.bind(null,"0ba7"))},Pt=function(){return n.e("chunk-674ac3fb").then(n.bind(null,"08ed"))},Et=function(){return n.e("chunk-2d237533").then(n.bind(null,"fb45"))},Rt=function(){return n.e("chunk-2d2095aa").then(n.bind(null,"a962"))},Bt=function(){return n.e("chunk-2d0e5e97").then(n.bind(null,"9703"))},It=[{path:"/",name:"index",redirect:"/home",component:kt,children:[{path:"home",name:"home",component:ee},{path:"song/:songId",name:"song",component:St},{path:"favorite",name:"favorite",component:At},{path:"search",name:"search",component:Lt},{path:"search/:query",name:"query",component:Rt},{path:"genre/:genreId",name:"genre",component:Et},{path:"404",name:"notfound",component:Bt}]},{path:"/login",name:"login",component:wt},{path:"/register",name:"register",component:xt},{path:"/admin",name:"admin",component:Ct},{path:"/manage",name:"manage",component:_t,redirect:"/manage/song-list",meta:{requiresAuth:!0},children:[{path:"song-list",name:"song-list",component:Tt},{path:"add-song",name:"add-song",component:Mt},{path:"genre-list",name:"genre-list",component:Pt}]},{path:"/:catchAll(.*)*",redirect:{name:"home"}}],Vt=Object(V["a"])({history:Object(V["b"])(),routes:It}),Jt=Vt,qt=(n("b680"),n("a9e3"),n("1e5c")),Gt={formatTime:function(e){var t=Math.floor(e/60)||0,n=Math.round(e-60*t||0);return"".concat(t,":").concat(n<10?"0":"").concat(n)}},Wt=Object(me["a"])({state:{showSearch:!1,defaultQuery:"",currentSong:{},sound:{},seek:"00:00",duration:"00:00",playerProgress:"0%",volumeWidth:ae["a"].get("volume")||.5,fastwindSec:ae["a"].get("fastwindSec")},mutations:{toggleSearchShow:function(e){e.showSearch=!e.showSearch},getDefaultQuery:function(e,t){e.defaultQuery=t},newSong:function(e,t){e.currentSong=t,e.sound=new qt["Howl"]({src:t.file,html5:!0})},updatePosition:function(e){e.seek=Gt.formatTime(e.sound.seek()),e.duration=Gt.formatTime(e.sound.duration()),e.playerProgress="".concat(e.sound.seek()/e.sound.duration()*100,"%")},mute:function(e,t){e.volumeWidth=t?ae["a"].get("volume"):0},setFastwindSec:function(e,t){e.fastwindSec=t}},actions:{newSong:function(e,t){return Object(K["a"])(regeneratorRuntime.mark((function n(){var r,c,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.commit,c=e.state,a=e.dispatch,c.sound instanceof qt["Howl"]&&c.sound.unload(),r("newSong",t),c.sound.play(),c.sound.on("play",(function(){requestAnimationFrame((function(){a("progress")}))}));case 5:case"end":return n.stop()}}),n)})))()},progress:function(e){var t=e.commit,n=e.state,r=e.dispatch;t("updatePosition"),n.sound.playing()&&requestAnimationFrame((function(){r("progress")}))},updateSeek:function(e,t){var n=e.state,r=e.dispatch;if(n.sound.playing){var c=t.currentTarget.getBoundingClientRect(),a=c.x,o=c.width,u=t.clientX-a,i=u/o,s=n.sound.duration()*i;n.sound.seek(s),n.sound.once("seek",(function(){return r("progress")}))}},toggleAudio:function(e){return Object(K["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,n.sound.playing){t.next=3;break}return t.abrupt("return");case 3:n.sound.playing()?n.sound.pause():n.sound.play();case 4:case"end":return t.stop()}}),t)})))()},updateVolume:function(e,t){var n=e.state,r=t.currentTarget.getBoundingClientRect(),c=r.x,a=r.width,o=t.clientX-c,u=(o/a).toFixed(2);n.volumeWidth=u>0?u:0,qt["Howler"].volume(Number(u)),ae["a"].set("volume",u)},fastwind:function(e,t){var n=e.state,r=e.dispatch;n.sound.playing&&(n.sound.seek()+t>n.sound.duration()||(n.sound.seek(n.sound.seek()+t),n.sound.once("seek",(function(){return r("progress")}))))}},getters:{playing:function(e){return!!e.sound.playing&&e.sound.playing()},getCurrentSong:function(e){return!!e.currentSong&&e.currentSong}},modules:{}}),Ht=n("7bb1"),Nt=n("3aa8"),Qt={install:function(e){e.component("VeeForm",Ht["c"]),e.component("VeeField",Ht["b"]),e.component("ErrorMessage",Ht["a"]),Object(Ht["e"])("required",Nt["g"]),Object(Ht["e"])("min",Nt["e"]),Object(Ht["e"])("max",Nt["c"]),Object(Ht["e"])("email",Nt["b"]),Object(Ht["e"])("min_value",Nt["f"]),Object(Ht["e"])("max_value",Nt["d"]),Object(Ht["e"])("passwords_mismatch",Nt["a"]),Object(Ht["d"])({generateMessage:function(e){var t={required:"*此攔必填",min:"長度不足",max:"超過字數上限",email:"信箱輸入有誤",min_value:"字數不足",max_value:"超過字數上限",passwords_mismatch:"與密碼不相同"},n=t[e.rule.name]?t[e.rule.name]:"The field ".concat(e.field," is invalid.");return n},validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0})}},Ft=(n("ba8c"),n("845f"),n("323e")),Ut=n.n(Ft),Xt=function(e){e.beforeEach((function(e,t,n){Ut.a.start(),n()})),e.afterEach(Ut.a.done)};n("a5d8");Xt(Jt);var Dt=Object(r["e"])(I);Dt.use(Wt),Dt.use(Jt),Dt.use(Qt),Dt.use(c["a"]),Dt.mount("#app")},"58f6":function(e,t,n){e.exports=n.p+"img/headphone.70c4578c.jpg"},6650:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return i}));var r=n("5530"),c=n("bfbe");function a(e,t,n){return Object(c["b"])(Object(r["a"])({title:e,text:t},n))}function o(e,t,n){return a(e,t,Object(r["a"])(Object(r["a"])({},n),{},{type:"success"}))}function u(e,t,n){return a(e,t,Object(r["a"])(Object(r["a"])({},n),{},{type:"warn"}))}function i(e,t,n){return a(e,t,Object(r["a"])(Object(r["a"])({},n),{},{type:"error"}))}},"7f73":function(e,t,n){},"845f":function(e,t,n){},"94eb":function(e,t,n){"use strict";n("7f73")},a178:function(e,t,n){},a7d2:function(e,t,n){},a998:function(e,t,n){"use strict";n("eb83")},ab63:function(e,t,n){"use strict";n("52e3")},b250:function(e,t,n){"use strict";var r={set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(localStorage.getItem(e))},remove:function(e){localStorage.removeItem(e)}};t["a"]=r},ba8c:function(e,t,n){},babd:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i}));var r=n("7a23"),c=Object(r["G"])(!1),a=Object(r["G"])("");function o(){return{show:c,msg:a}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c.value=!0,a.value=e}function i(){c.value=!1,a.value=""}},d9ee:function(e,t,n){"use strict";n("a7d2")},e704:function(e,t,n){"use strict";n("a178")},eb83:function(e,t,n){}});
//# sourceMappingURL=app.9426e6f6.js.map