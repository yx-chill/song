(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-400ede5e"],{"498a":function(e,t,r){"use strict";var n=r("23e7"),a=r("58a8").trim,c=r("c8d2");n({target:"String",proto:!0,forced:c("trim")},{trim:function(){return a(this)}})},"8b93":function(e,t,r){"use strict";r("b42e")},a55b:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),a=function(e){return Object(n["D"])("data-v-a3c7e55e"),e=e(),Object(n["B"])(),e},c={class:"main overflow-hidden p-20 relative"},o={class:"loginform bg-purple-200 bg-opacity-80 p-4 rounded"},s={class:"emailgroup relative mb-3"},l=a((function(){return Object(n["i"])("i",{class:"fas fa-user absolute top-2 left-3 text-xl"},null,-1)})),u={class:"passwordgroup relative"},i=a((function(){return Object(n["i"])("i",{class:"fas fa-lock absolute top-2 left-3 text-xl"},null,-1)})),d={key:0,class:"text-white text-center bg-red-500 px-2 py-1 rounded"},b=["disabled"],p={class:"mt-3 pt-2 border-gray-400 border-t-2 text-center"},f=a((function(){return Object(n["i"])("p",{class:"font-bold mb-3"},"未註冊帳戶?",-1)})),m=Object(n["k"])(" 建立新帳號 ");function g(e,t,r,a,g,w){var O=Object(n["J"])("VeeField"),j=Object(n["J"])("ErrorMessage"),v=Object(n["J"])("VeeForm"),h=Object(n["J"])("router-link");return Object(n["A"])(),Object(n["h"])("main",c,[Object(n["i"])("div",o,[Object(n["l"])(v,{"validation-schema":a.loginSchema,onSubmit:t[2]||(t[2]=function(e){return a.login(e)}),class:"space-y-3"},{default:Object(n["W"])((function(){return[Object(n["i"])("div",s,[l,Object(n["l"])(O,{type:"email",name:"email",placeholder:"電子郵件",value:"guest@gmail.com",class:"h-10 pl-10 text-xl block w-full rounded mb-1"}),Object(n["l"])(j,{class:"text-red-500 font-bold",name:"email"})]),Object(n["i"])("div",u,[i,Object(n["i"])("i",{class:Object(n["t"])(["absolute top-2 right-3 text-xl cursor-pointer",a.showPwd?"fas fa-eye-slash":"fas fa-eye"]),onClick:t[0]||(t[0]=function(){return a.toggleType&&a.toggleType.apply(a,arguments)})},null,2),Object(n["X"])(Object(n["i"])("input",{type:"password",name:"password",placeholder:"密碼",ref:"pwd",class:"password h-10 px-10 text-xl block w-full rounded mb-2","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.password=e})},null,512),[[n["R"],a.password]]),a.errMsg?(Object(n["A"])(),Object(n["h"])("p",d,Object(n["M"])(a.errMsg),1)):Object(n["g"])("",!0)]),Object(n["i"])("button",{type:"submit",class:"block w-full font-bold bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700",disabled:a.disabled}," 登入 ",8,b)]})),_:1},8,["validation-schema"]),Object(n["i"])("div",p,[f,Object(n["l"])(h,{class:"block w-full rounded-full border-2 py-1.5 font-bold hover:bg-purple-200",to:{name:"register"}},{default:Object(n["W"])((function(){return[m]})),_:1})])])])}var w=r("1da1"),O=(r("96cf"),r("498a"),r("6c02")),j=r("bc3a"),v=r.n(j),h=r("b250"),x=r("6650"),y=r("babd"),k={email:"required|min:3|max:50|email"},R=function(){var e=Object(n["G"])(null),t=Object(n["G"])(!1),r=function(){t.value?e.value.type="password":e.value.type="text",t.value=!t.value};return{pwd:e,showPwd:t,toggleType:r}},M=function(){var e=Object(O["d"])(),t=Object(n["E"])({email:"",password:""}),r=Object(n["G"])(""),a=Object(n["G"])(!1),c=Object(n["G"])("guestguest"),o=function(){var n=Object(w["a"])(regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.email=o.email,t.password=c.value,r.value="",""===t.email.trim()||""===t.password.trim()){n.next=10;break}return a.value=!0,Object(y["b"])("登入中..."),n.next=8,v()({method:"post",url:"https://api.sally-handmade.com/music/v1/login",data:t}).then(function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].set("userToken",r.data.access_token);case 2:return t.next=4,h["a"].set("userRefreshToken",r.data.refresh_token);case 4:e.push({name:"home"}).then((function(){return Object(x["b"])("登入成功")}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e.response.status),c.value="",r.value="信箱或密碼有誤，請重新輸入!"}));case 8:n.next=12;break;case 10:c.value="",r.value="信箱或密碼不能為空";case 12:a.value=!1,Object(y["a"])();case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{errMsg:r,disabled:a,password:c,login:o}},T={name:"Login",setup:function(){var e=R(),t=e.pwd,r=e.showPwd,n=e.toggleType,a=M(),c=a.errMsg,o=a.disabled,s=a.password,l=a.login;return{loginSchema:k,pwd:t,showPwd:r,toggleType:n,errMsg:c,disabled:o,password:s,login:l}}},J=(r("8b93"),r("6b0d")),P=r.n(J);const _=P()(T,[["render",g],["__scopeId","data-v-a3c7e55e"]]);t["default"]=_},b42e:function(e,t,r){},c8d2:function(e,t,r){var n=r("5e77").PROPER,a=r("d039"),c=r("5899"),o="​᠎";e.exports=function(e){return a((function(){return!!c[e]()||o[e]()!==o||n&&c[e].name!==e}))}}}]);
//# sourceMappingURL=chunk-400ede5e.164aa12e.js.map