{"version":3,"sources":["webpack:///./src/views/Query.vue","webpack:///./src/views/Query.vue?da15"],"names":["class","isNotExist","query","result","length","song","key","id","to","style","image","src","alt","title","name","composer","store","route","params","data","getResult","commit","value","method","url","then","res","catch","error","console","log","setup","defaultImg","__exports__","render"],"mappings":"oJACOA,MAAM,O,GACJA,MAAM,sC,uBAIPA,MAAM,uE,GAICA,MAAM,sD,yBAORA,MAAM,iB,oFAhBjB,eAoBM,MApBN,EAoBM,CAnBJ,eAGM,MAHN,EAGM,CAFK,EAAAC,Y,iBAAT,eAAmD,MAA9B,WAAQ,eAAG,EAAAC,OAAQ,UAAO,I,sBACtC,EAAAC,OAAOC,Q,iBAAhB,eAAkD,MAA1B,OAAI,eAAG,EAAAF,OAAQ,UAAO,I,wBAEhD,eAcK,KAdL,EAcK,E,mBAbH,eAYK,2BAZc,EAAAC,QAAM,SAAdE,G,wBAAX,eAYK,MAZuBC,IAAKD,EAAKE,I,CACpC,eAUc,GAVAC,GAAE,4BAAoCH,EAAKE,KACvDP,MAAM,wD,yBACN,iBAKM,CALN,eAKM,MALN,EAKM,CAJJ,eAEiE,OAF5DA,MAAM,4CACRS,MAAK,gCAAoBJ,EAAKK,M,OAA+B,EAAK,MAAK,WAAkB,aAAU,O,QAEtG,eAA6E,OAAvEC,IAAKN,EAAKK,OAAS,EAAQ,QAA2BE,IAAI,c,YAElE,eAAmE,MAA/DZ,MAAM,kBAAmBa,MAAOR,EAAKS,M,eAAST,EAAKS,MAAI,KAC3D,eAAgD,IAAhD,EAAgD,eAApBT,EAAKU,UAAQ,O,sHAiB7C,EAAkB,SAACC,GACvB,IAAMC,EAAQ,iBACRf,EAAQ,gBAAS,kBAAMe,EAAMC,OAAOhB,SACpCD,EAAa,gBAAI,GACjBkB,EAAO,eAAS,CAAEhB,OAAQ,KAC1BiB,EAAQ,yDAAI,qGAChBJ,EAAMK,OAAO,kBAAmBnB,EAAMoB,OACtC,iBAFgB,SAGV,IAAM,CACVC,OAAQ,MACRC,IAAK,wDAAF,OAA0DtB,EAAMoB,SAClEG,MAAK,SAACC,GACPP,EAAKhB,OAASuB,EAAIP,KAAKA,KACvBlB,EAAWqB,OAASI,EAAIP,KAAKA,KAAKf,UACjCuB,OAAM,SAACC,GACRC,QAAQC,IAAIF,MAVE,OAYhB,iBAZgB,2CAAJ,qDAed,gBAAY,kBAAMR,OAClB,MAAmB,eAAOD,GAAlBhB,EAAR,EAAQA,OAER,MAAO,CAAEF,aAAYC,QAAOC,WAGf,GACbW,KAAM,QACNiB,MAFa,WAGX,IAAMf,EAAQ,iBAERgB,EAAa,EAAQ,QAC3B,EAAsC,EAAgBhB,GAA9Cf,EAAR,EAAQA,WAAYE,EAApB,EAAoBA,OAAQD,EAA5B,EAA4BA,MAS5B,OAPAc,EAAMK,OAAO,oBAEb,gBAAgB,WACdL,EAAMK,OAAO,oBACbL,EAAMK,OAAO,kBAAmB,OAG3B,CACLnB,QAAOC,SAAQF,aAAY+B,gB,qBCvEjC,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d2095aa.c681d69b.js","sourcesContent":["<template>\n  <div class=\"p-5\">\n    <div class=\"font-bold text-2xl text-white mb-3\">\n      <p v-if=\"isNotExist\">很抱歉，沒有 \"{{ query }}\" 的搜尋結果</p>\n      <p v-if=\"result.length\">有關 \"{{ query }}\" 的搜尋結果</p>\n    </div>\n    <ul class=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-5\">\n      <li v-for=\"song in result\" :key=\"song.id\">\n        <router-link :to=\"{ name: 'song', params: { songId: song.id } }\"\n          class=\"song block p-4 bg-gray-600 hover:bg-gray-500 rounded\">\n          <div class=\"aspect-w-1 aspect-h-1 rounded overflow-hidden mb-4\">\n            <div class=\"absolute inset-0 bg-center filter blur-xl\"\n              :style=\"{backgroundImage: song.image ?\n              'url(' + song.image + ')' : 'url(' + defaultImg + ')' }\"></div>\n            <img :src=\"song.image || require('@/assets/headphone.jpg')\" alt=\"song photo\">\n          </div>\n          <h2 class=\"text-white mb-2\" :title=\"song.name\">{{ song.name }}</h2>\n          <p class=\"text-gray-300\">{{ song.composer }}</p>\n        </router-link>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport {\n  computed, onBeforeUnmount, reactive, ref, toRefs, watchEffect,\n} from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport axios from 'axios';\nimport { showLoading, hideLoading } from '@/composables/useLoading';\n\n// 查詢結果\nconst handleGetResult = (store) => {\n  const route = useRoute();\n  const query = computed(() => route.params.query);\n  const isNotExist = ref(false);\n  const data = reactive({ result: [] });\n  const getResult = async () => {\n    store.commit('getDefaultQuery', query.value);\n    showLoading();\n    await axios({\n      method: 'get',\n      url: `https://api.sally-handmade.com/music/v1/music?search=${query.value}`,\n    }).then((res) => {\n      data.result = res.data.data;\n      isNotExist.value = !res.data.data.length;\n    }).catch((error) => {\n      console.log(error);\n    });\n    hideLoading();\n  };\n  // 監聽查詢參數，有改變會自動執行\n  watchEffect(() => getResult());\n  const { result } = toRefs(data);\n\n  return { isNotExist, query, result };\n};\n\nexport default {\n  name: 'Query',\n  setup() {\n    const store = useStore();\n    // eslint-disable-next-line global-require\n    const defaultImg = require('../assets/headphone.jpg');\n    const { isNotExist, result, query } = handleGetResult(store);\n\n    store.commit('toggleSearchShow');\n\n    onBeforeUnmount(() => {\n      store.commit('toggleSearchShow');\n      store.commit('getDefaultQuery', '');\n    });\n\n    return {\n      query, result, isNotExist, defaultImg,\n    };\n  },\n};\n</script>\n","import { render } from \"./Query.vue?vue&type=template&id=68ab1a58\"\nimport script from \"./Query.vue?vue&type=script&lang=js\"\nexport * from \"./Query.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\xampp\\\\htdocs\\\\song\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}