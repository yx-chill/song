(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56bbd00e"],{"0c0f":function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f}));n("d3b7"),n("159b");var c=n("bc3a"),a=n.n(c),r=n("b250"),o=function(){return a()({method:"post",url:"https://api.sally-handmade.com/music/v1/admin/refresh",data:{refresh_token:r["a"].get("adminRefresh")}})},i=a.a.create({baseURL:"https://api.sally-handmade.com/music/",timeout:1e4});i.interceptors.request.use((function(e){return e.headers.Authorization="Bearer ".concat(r["a"].get("adminToken")),e}),(function(e){console.log(e)}));var s=!1,u=[];i.interceptors.response.use((function(e){return e}),(function(e){if(!e.response)return Promise.reject(e);var t=e.config;return 401===e.response.status?s?new Promise((function(e){u.push((function(n){t.headers.Authorization="Bearer ".concat(n),i(t).then((function(t){return e(t)}))}))})):(s=!0,o().then((function(e){r["a"].set("adminToken",e.data.access_token),r["a"].set("adminRefresh",e.data.refresh_token),t.headers.Authorization="Bearer ".concat(e.data.access_token),u.forEach((function(t){return t(e.data.access_token)})),u=[]})).catch((function(){alert("因長時間未上線，請重新登入"),r["a"].remove("adminToken"),r["a"].remove("adminRefresh")})).finally((function(){s=!1})),new Promise((function(e){i(t).then((function(t){return e(t)}))}))):Promise.reject(e)}));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.get(e,{params:t})},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return i.post(e,t,n)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.delete(e,{params:t})}},"8c62":function(e,t,n){"use strict";n("d9a0")},a85c:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));n("d3b7");var c=n("7a23"),a=function(e){return{all:e=e||new Map,on:function(t,n){var c=e.get(t);c?c.push(n):e.set(t,[n])},off:function(t,n){var c=e.get(t);c&&(n?c.splice(c.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var c=e.get(t);c&&c.slice().map((function(e){e(n)})),(c=e.get("*"))&&c.slice().map((function(e){e(t,n)}))}}},r=a(),o=Object(c["G"])(!1),i=function(){r.emit("success")},s=function(){r.emit("cancel")};function u(){return{showModal:o,handleSuccess:i,handleCancel:s}}function l(){return o.value=!0,new Promise((function(e){r.on("success",(function(){e(!0)})),r.on("cancel",(function(){e(!1)}))}))}},b083:function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a={class:"h-screen flex"};function r(e,t,n,r,o,i){var s=Object(c["J"])("SideBar"),u=Object(c["J"])("router-view"),l=Object(c["J"])("ConfirmModal");return Object(c["A"])(),Object(c["h"])(c["a"],null,[Object(c["i"])("main",a,[Object(c["l"])(s),Object(c["l"])(u,{class:"p-5 w-full overflow-auto"})]),Object(c["l"])(l,{modelValue:e.showModal,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.showModal=t}),onSuccess:e.handleSuccess,onCancel:e.handleCancel},null,8,["modelValue","onSuccess","onCancel"])],64)}var o=n("5530"),i=n("6c02"),s=function(e){return Object(c["D"])("data-v-6f616658"),e=e(),Object(c["B"])(),e},u={class:"sidebar text-white w-20 h-full"},l={class:"bg-black w-full h-full opacity-75 p-3 flex flex-col relative"},d={class:"absolute bottom-0 left-0 p-3 text-center rounded hover:bg-opacity-20 hover:bg-white block w-full"},f=s((function(){return Object(c["i"])("i",{class:"fas fa-sign-out-alt text-xl mr-4"},null,-1)})),b=s((function(){return Object(c["i"])("span",{class:"text hidden"},"登出",-1)})),p=[f,b],m=s((function(){return Object(c["i"])("div",{class:"p-3 pb-0"},[Object(c["i"])("h2",{class:"text-white text-xl text-center border-b border-gray-50 border-opacity-70 pb-3"},[Object(c["i"])("i",{class:"fas fa-user-shield text-xl mr-3"}),Object(c["i"])("span",{class:"text hidden"},"後臺管理")])],-1)})),h={class:"overflow-auto"},v={class:"text-center"},j={class:"py-1"},O=s((function(){return Object(c["i"])("i",{class:"fas fa-list-ul text-xl mr-4"},null,-1)})),g=s((function(){return Object(c["i"])("span",{class:"text hidden"},"歌曲列表",-1)})),x={class:"py-1"},w=s((function(){return Object(c["i"])("i",{class:"fas fa-upload text-xl mr-4"},null,-1)})),y=s((function(){return Object(c["i"])("span",{class:"text hidden"},"新增歌曲",-1)})),k={class:"py-1"},C=s((function(){return Object(c["i"])("i",{class:"fas fa-bookmark text-xl ml-02 mr-18"},null,-1)})),S=s((function(){return Object(c["i"])("span",{class:"text hidden"},"曲風管理",-1)}));function _(e,t,n,a,r,o){var i=Object(c["J"])("router-link");return Object(c["A"])(),Object(c["h"])("div",u,[Object(c["i"])("div",l,[Object(c["i"])("div",d,[Object(c["i"])("button",{type:"button",class:"block w-full",onClick:t[0]||(t[0]=function(){return a.adminLogout&&a.adminLogout.apply(a,arguments)})},p)]),m,Object(c["i"])("div",h,[Object(c["i"])("ul",v,[Object(c["i"])("li",j,[Object(c["l"])(i,{to:{name:"song-list"},class:"block w-full rounded hover:bg-opacity-20 hover:bg-white px-3 py-1"},{default:Object(c["W"])((function(){return[O,g]})),_:1})]),Object(c["i"])("li",x,[Object(c["l"])(i,{to:{name:"add-song"},class:"block w-full rounded hover:bg-opacity-20 hover:bg-white px-3 py-1"},{default:Object(c["W"])((function(){return[w,y]})),_:1})]),Object(c["i"])("li",k,[Object(c["l"])(i,{to:{name:"genre-list"},class:"block w-full rounded hover:bg-opacity-20 hover:bg-white px-3 py-1"},{default:Object(c["W"])((function(){return[C,S]})),_:1})])])])])])}var B=n("1da1"),M=(n("96cf"),n("0c0f")),R=n("b250"),V=n("6650"),A=n("babd"),J={name:"BackSideBar",setup:function(){var e=Object(i["d"])(),t=function(){var t=Object(B["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(A["b"])(),t.prev=1,t.next=4,Object(M["b"])("v1/admin/logout");case 4:R["a"].remove("adminToken"),R["a"].remove("adminRefresh"),e.push({name:"admin"}).then((function(){return Object(V["b"])("登出成功")})),t.next=15;break;case 9:t.prev=9,t.t0=t["catch"](1),Object(V["a"])("Error",t.t0.response),R["a"].remove("adminToken"),R["a"].remove("adminRefresh"),e.push({name:"admin"});case 15:Object(A["a"])();case 16:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}();return{adminLogout:t}}},T=(n("8c62"),n("6b0d")),P=n.n(T);const L=P()(J,[["render",_],["__scopeId","data-v-6f616658"]]);var z=L,E={class:"absolute inset-0 flex justify-center items-center"},W={class:"w-full max-w-md p-6 overflow-hidden text-center bg-white align-middle transition-all transform shadow-xl rounded-2xl",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},I={class:"mt-2"},U=Object(c["i"])("i",{class:"fas fa-exclamation-triangle text-red-600 text-5xl mb-4"},null,-1),Z=Object(c["i"])("p",{class:"text-xl text-red-600 font-bold"},"確定要刪除嗎?",-1),q={class:"mt-10"},D={class:"grid grid-cols-2 gap-4"};function G(e,t,n,a,r,o){return Object(c["X"])((Object(c["A"])(),Object(c["h"])("div",E,[Object(c["i"])("div",W,[Object(c["i"])("div",I,[U,Object(c["I"])(e.$slots,"title",{},(function(){return[Z]}))]),Object(c["i"])("div",q,[Object(c["i"])("div",D,[Object(c["i"])("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-lg font-bold border border-gray-200 rounded-md hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:t[0]||(t[0]=Object(c["Z"])((function(){return a.handleCancel&&a.handleCancel.apply(a,arguments)}),["prevent"]))},"取消"),Object(c["i"])("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-lg font-bold text-red-900 bg-red-100 border border-gray-200 rounded-md hover:bg-red-200 focus:outline-none focus-visible:ring-2 mr-3 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:t[1]||(t[1]=Object(c["Z"])((function(){return a.handleSuccess&&a.handleSuccess.apply(a,arguments)}),["prevent"]))},"確定")])])])],512)),[[c["S"],n.modelValue]])}var X={name:"Modal",emits:["update:modelValue","success","cancel"],props:{modelValue:Boolean},setup:function(e,t){var n=t.emit,c=function(){n("update:modelValue",!1)},a=function(){n("success"),c()},r=function(){n("cancel"),c()};return{handleSuccess:a,handleCancel:r}}};const $=P()(X,[["render",G]]);var F=$,H=n("a85c"),K={name:"Manage",components:{SideBar:z,ConfirmModal:F},setup:function(){var e=Object(i["d"])();R["a"].get("adminToken")||e.push({name:"admin"}).then((function(){return Object(V["c"])("請先登入")}));var t=Object(c["E"])({genres:[]});return Object(M["b"])("v1/admin/music-type").then((function(e){t.genres=e.data.data})).catch((function(e){console.log(e)})),Object(o["a"])({},Object(H["b"])())}};const N=P()(K,[["render",r]]);t["default"]=N},d9a0:function(e,t,n){}}]);
//# sourceMappingURL=chunk-56bbd00e.146b50bc.js.map