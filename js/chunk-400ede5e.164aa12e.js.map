{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.trim.js","webpack:///./src/views/Login.vue?9806","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?e63b","webpack:///./node_modules/core-js/internals/string-trim-forced.js"],"names":["$","$trim","trim","forcedStringTrimMethod","target","proto","forced","this","class","validation-schema","loginSchema","login","$event","type","name","placeholder","value","showPwd","toggleType","ref","password","errMsg","disabled","to","email","pwd","router","data","e","method","url","then","res","storage","set","access_token","refresh_token","push","catch","err","console","log","response","status","setup","__exports__","render","PROPER_FUNCTION_NAME","PROPER","fails","whitespaces","non","module","exports","METHOD_NAME"],"mappings":"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","file":"js/chunk-400ede5e.164aa12e.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Login.vue?vue&type=style&index=0&id=a3c7e55e&scoped=true&lang=css\"","<template>\n  <main class=\"main overflow-hidden p-20 relative\">\n    <div class=\"loginform bg-purple-200 bg-opacity-80 p-4 rounded\">\n      <VeeForm :validation-schema=\"loginSchema\" @submit=\"login($event)\" class=\"space-y-3\">\n        <div class=\"emailgroup relative mb-3\">\n          <i class=\"fas fa-user absolute top-2 left-3 text-xl\"></i>\n          <VeeField type=\"email\" name=\"email\" placeholder=\"電子郵件\" value=\"guest@gmail.com\"\n            class=\"h-10 pl-10 text-xl block w-full rounded mb-1\" />\n            <ErrorMessage class=\"text-red-500 font-bold\" name=\"email\" />\n        </div>\n        <div class=\"passwordgroup relative\">\n          <i class=\"fas fa-lock absolute top-2 left-3 text-xl\"></i>\n          <i class=\"absolute top-2 right-3 text-xl cursor-pointer\"\n          :class=\"showPwd ? 'fas fa-eye-slash' : 'fas fa-eye'\" @click=\"toggleType\"></i>\n          <input type=\"password\" name=\"password\" placeholder=\"密碼\" ref=\"pwd\"\n            class=\"password h-10 px-10 text-xl block w-full rounded mb-2\" v-model=\"password\" />\n          <p class=\"text-white text-center bg-red-500 px-2 py-1 rounded \"\n            v-if=\"errMsg\">{{ errMsg }}</p>\n        </div>\n        <button type=\"submit\" class=\"block w-full font-bold bg-purple-600\n          text-white py-1.5 px-3  rounded transition hover:bg-purple-700\"\n          :disabled=\"disabled\">\n            登入\n        </button>\n      </VeeForm>\n      <div class=\"mt-3 pt-2 border-gray-400 border-t-2 text-center\">\n        <p class=\"font-bold mb-3\">未註冊帳戶?</p>\n        <router-link class=\"block w-full rounded-full border-2 py-1.5 font-bold\n          hover:bg-purple-200\" :to=\"{ name: 'register' }\">\n          建立新帳號\n        </router-link>\n      </div>\n  </div>\n  </main>\n</template>\n\n<script>\nimport { ref, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport storage from '@/includes/storage';\nimport { successNotify } from '@/composables/useNotification';\nimport { showLoading, hideLoading } from '@/composables/useLoading';\n\nconst loginSchema = { email: 'required|min:3|max:50|email' };\n\n// 切換密碼欄type\nconst handlePwdType = () => {\n  const pwd = ref(null);\n  const showPwd = ref(false);\n  const toggleType = () => {\n    if (!showPwd.value) {\n      pwd.value.type = 'text';\n    } else {\n      pwd.value.type = 'password';\n    }\n    showPwd.value = !showPwd.value;\n  };\n  return { pwd, showPwd, toggleType };\n};\n\n// 登入\nconst handleLogin = () => {\n  const router = useRouter();\n  const data = reactive({ email: '', password: '' });\n  const errMsg = ref('');\n  const disabled = ref(false);\n  const password = ref('guestguest');\n  const login = async (e) => {\n    data.email = e.email;\n    data.password = password.value;\n    errMsg.value = '';\n    if (data.email.trim() !== '' && data.password.trim() !== '') {\n      disabled.value = true;\n      showLoading('登入中...');\n      await axios({\n        method: 'post',\n        url: 'https://api.sally-handmade.com/music/v1/login',\n        data,\n      }).then(async (res) => {\n        await storage.set('userToken', res.data.access_token);\n        await storage.set('userRefreshToken', res.data.refresh_token);\n        router.push({ name: 'home' }).then(() => successNotify('登入成功'));\n      }).catch((err) => {\n        console.log(err.response.status);\n        password.value = '';\n        errMsg.value = '信箱或密碼有誤，請重新輸入!';\n      });\n    } else {\n      password.value = '';\n      errMsg.value = '信箱或密碼不能為空';\n    }\n    disabled.value = false;\n    hideLoading();\n  };\n  // eslint-disable-next-line object-curly-newline\n  return { errMsg, disabled, password, login };\n};\n\nexport default {\n  name: 'Login',\n  setup() {\n    const { pwd, showPwd, toggleType } = handlePwdType();\n    // eslint-disable-next-line object-curly-newline\n    const { errMsg, disabled, password, login } = handleLogin();\n    return {\n      loginSchema, pwd, showPwd, toggleType, errMsg, disabled, password, login,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.main {\n  height: 100vh;\n  background: url('../assets/login-bg.jpg');\n  background-position: bottom center;\n}\n.loginform {\n  width: 450px;\n  margin: 0 auto;\n  box-shadow: 0 2px 4px rgb(0 0 0 / 10%), 0 8px 16px rgb(0 0 0 / 10%);\n}\n</style>\n","import { render } from \"./Login.vue?vue&type=template&id=a3c7e55e&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=a3c7e55e&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\xampp\\\\htdocs\\\\song\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a3c7e55e\"]])\n\nexport default __exports__","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n"],"sourceRoot":""}